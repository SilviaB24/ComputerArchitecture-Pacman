
#include "PacmanMovements.h"



uint16_t labyrinthMatrix[LABYRINTH_HEIGHT][LABYRINTH_WIDTH] = {
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1},
    {1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1},
    {1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1},
    {1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1},
    {1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1},
    {0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0},
    {1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1},
    {1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1},
    {1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {1, 0, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1},
    {1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1},
    {1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1},
    {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1}
};

uint16_t pacmanMatrix_Left[PACMAN_SIZE][PACMAN_SIZE] = {
	{0, 0, 1, 1, 1, 1, 1, 1, 0, 0},
	{0, 1, 1, 1, 1, 1, 1, 1, 1, 0},
	{1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
	{0, 0, 0, 1, 1, 1, 1, 1, 1, 1},
	{0, 0, 0, 0, 0, 0, 1, 1, 1, 1},
	{0, 0, 0, 0, 0, 0, 1, 1, 1, 1},
	{0, 0, 0, 1, 1, 1, 1, 1, 1, 1},
	{1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
	{0, 1, 1, 1, 1, 1, 1, 1, 1, 0},
	{0, 0, 1, 1, 1, 1, 1, 1, 0, 0}
};

uint16_t pacmanMatrix_Right[PACMAN_SIZE][PACMAN_SIZE] = {
    {0, 0, 1, 1, 1, 1, 1, 1, 0, 0},
    {0, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
    {1, 1, 1, 1, 1, 1, 1, 0, 0, 0},
    {1, 1, 1, 1, 0, 0, 0, 0, 0, 0},
    {1, 1, 1, 1, 0, 0, 0, 0, 0, 0},
    {1, 1, 1, 1, 1, 1, 1, 0, 0, 0},
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
    {0, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {0, 0, 1, 1, 1, 1, 1, 1, 0, 0}
};

uint16_t pacmanMatrix_Down[PACMAN_SIZE][PACMAN_SIZE] = {
    {0, 0, 1, 1, 1, 1, 1, 1, 0, 0},
    {0, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
    {1, 1, 1, 1, 0, 0, 1, 1, 1, 1},
    {1, 1, 1, 1, 0, 0, 1, 1, 1, 1},
    {1, 1, 1, 1, 0, 0, 1, 1, 1, 1},
    {1, 1, 1, 0, 0, 0, 0, 1, 1, 1},
    {0, 1, 1, 0, 0, 0, 0, 1, 1, 0},
    {0, 0, 1, 0, 0, 0, 0, 1, 0, 0}
};
uint16_t pacmanMatrix_Up[PACMAN_SIZE][PACMAN_SIZE] = {
    {0, 0, 1, 0, 0, 0, 0, 1, 0, 0},
    {0, 1, 1, 0, 0, 0, 0, 1, 1, 0},
    {1, 1, 1, 0, 0, 0, 0, 1, 1, 1},
    {1, 1, 1, 1, 0, 0, 1, 1, 1, 1},
    {1, 1, 1, 1, 0, 0, 1, 1, 1, 1},
    {1, 1, 1, 1, 0, 0, 1, 1, 1, 1},
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
    {0, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {0, 0, 1, 1, 1, 1, 1, 1, 0, 0}
};

uint16_t pacmanMatrixMovements_Left[PACMAN_SIZE][PACMAN_SIZE] = {
	{0, 0, 1, 0, 0, 0, 0, 2, 0, 0},
	{0, 1, 0, 0, 0, 0, 0, 0, 2, 0},
	{1, 0, 0, 0, 0, 0, 0, 0, 0, 2},
	{0, 0, 0, 1, 0, 0, 0, 0, 0, 2},
	{0, 0, 0, 0, 0, 0, 1, 0, 0, 2},
	{0, 0, 0, 0, 0, 0, 1, 0, 0, 2},
	{0, 0, 0, 1, 0, 0, 0, 0, 0, 2},
	{1, 0, 0, 0, 0, 0, 0, 0, 0, 2},
	{0, 1, 0, 0, 0, 0, 0, 0, 2, 0},
	{0, 0, 1, 0, 0, 0, 0, 2, 0, 0},
};

uint16_t pacmanMatrixMovements_Right[PACMAN_SIZE][PACMAN_SIZE] = {
	{0, 0, 2, 0, 0, 0, 0, 1, 0, 0},
	{0, 2, 0, 0, 0, 0, 0, 0, 1, 0},
	{2, 0, 0, 0, 0, 0, 0, 0, 0, 1},
	{2, 0, 0, 0, 0, 0, 1, 0, 0, 0},
	{2, 0, 0, 1, 0, 0, 0, 0, 0, 0},
	{2, 0, 0, 1, 0, 0, 0, 0, 0, 0},
	{2, 0, 0, 0, 0, 0, 1, 0, 0, 0},
	{2, 0, 0, 0, 0, 0, 0, 0, 0, 1},
	{0, 2, 0, 0, 0, 0, 0, 0, 1, 0},
	{0, 0, 2, 0, 0, 0, 0, 1, 0, 0},
};

uint16_t pacmanMatrixMovements_Down[PACMAN_SIZE][PACMAN_SIZE] = {
	{0, 0, 2, 2, 2, 2, 2, 2, 0, 0},
	{0, 2, 0, 0, 0, 0, 0, 0, 2, 0},
	{2, 0, 0, 0, 0, 0, 0, 0, 0, 2},
	{0, 0, 0, 0, 1, 1, 0, 0, 0, 0},
	{0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
	{0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
	{0, 0, 0, 1, 0, 0, 1, 0, 0, 0},
	{1, 0, 0, 0, 0, 0, 0, 0, 0, 1},
	{0, 1, 0, 0, 0, 0, 0, 0, 1, 0},
	{0, 0, 1, 0, 0, 0, 0, 1, 0, 0},
};

uint16_t pacmanMatrixMovements_Up[PACMAN_SIZE][PACMAN_SIZE] = {
	{0, 0, 1, 0, 0, 0, 0, 1, 0, 0},
	{0, 1, 0, 0, 0, 0, 0, 0, 1, 0},
	{1, 0, 0, 0, 0, 0, 0, 0, 0, 1},
	{0, 0, 0, 1, 0, 0, 1, 0, 0, 0},
	{0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
	{0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
	{0, 0, 0, 0, 1, 1, 0, 0, 0, 0},
	{2, 0, 0, 0, 0, 0, 0, 0, 0, 2},
	{0, 2, 0, 0, 0, 0, 0, 0, 2, 0},
	{0, 0, 2, 2, 2, 2, 2, 2, 0, 0},
};

void PacmanRotate(Position *pos, Direction newDir, Direction oldDir){
	int x,y;
	for(y=0; y<10; y++){
			for(x=0; x<10; x++){
				if (pacmanMatrixMovements_Left[y][x] == 2){
					
					LCD_SetPoint(pos->xPos + x, pos->yPos + y, Black);
				}
			}
	}

}

void PacmanMove(Position *pos, Direction dir){
	
	if (dir != NONE){
	
		int x,y;
			
			//Clear
		for(y=0; y<10; y++){
			for(x=0; x<10; x++){
				if (pacmanMatrix[y][x] == 2){
					LCD_SetPoint(pos->xPos + x, pos->yPos + y, Black);
				}
			}
		}
		//Check if possible to move (pos % 10 == 0) from labyrinth matrix (yes if 0, no if 1)
		//Move
		switch (dir) {
			case UP:
				pos->yPos--;
				break;
			case DOWN:
				pos->yPos++;
				break;
			case LEFT:
				pos->xPos--;
				break;
			case RIGHT:
				pos->xPos++;
				break;
			case NONE:
				break;
			default:
				break;
		}
		
		//Draw
		for(y=0; y<10; y++){
			for(x=0; x<10; x++){
				if (pacmanMatrix[y][x] == 1){
					LCD_SetPoint(pos->xPos + x, pos->yPos + y, Yellow);
				}
			}
		}
	}
}